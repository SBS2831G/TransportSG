div#serviceSummary
    -var services = Object.values(buses).map(busStop => busStop.map(svc => svc.service.fullService));
    -var flattened = services.reduce((a, b) => a.concat(b), []);
    -var deduped = flattened.filter((element, index, array) => array.indexOf(element) === index);
    span Service Summary:
    span=' ' + deduped.sort().join(', ')

div#busStops
    for busStopCode in Object.keys(buses)
        -var busStopData = busStopsData[busStopCode]
        -var busTimings = buses[busStopCode]

        div.busStopContainer
            label(for='checkbox-' + busStopCode).busStopHideContainer
                span.busStopName=busStopData.busStopName
            input(type='checkbox' id='checkbox-' + busStopCode).busStopHideCheckbox
            div.busStopContents
                include bus-timings
